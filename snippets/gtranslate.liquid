<!-- snippets/lang-switcher.liquid -->

<div id="google_translate_element" style="display: none;"></div>

<style>
  .lang-switcher {
    position: relative;
    width: 200px;
  }

  .lang-selected {
    background: #fff;
    border: 1px solid #ccc;
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .lang-options {
    display: none;
    position: absolute;
    top: 100%;
    width: 100%;
    background: white;
    border: 1px solid #ccc;
    max-height: 250px;
    overflow-y: auto;
    z-index: 9999;
  }

  .lang-options div {
    padding: 8px 12px;
    cursor: pointer;
  }

  .lang-options div:hover {
    background-color: #f0f0f0;
  }
</style>

<div class="lang-switcher">
  <div class="lang-selected" onclick="toggleDropdown()">üåê Select Language</div>
  <div class="lang-options" id="langOptions"></div>
</div>

<script>
  if (!window.customLangDropdownInitialized) {
    window.customLangDropdownInitialized = true;

    const languages = [
      { name: "English", code: "en" }, { name: "French", code: "fr" },
      { name: "German", code: "de" }, { name: "Hindi", code: "hi" },
      { name: "Spanish", code: "es" }, { name: "Chinese (Simplified)", code: "zh-CN" }
    ];

    function toggleDropdown() {
      const options = document.getElementById("langOptions");
      options.style.display = options.style.display === "block" ? "none" : "block";
    }

    function doGTranslate(langCode) {
      const combo = document.querySelector(".goog-te-combo");
      if (combo) {
        combo.value = langCode;
        combo.dispatchEvent(new Event("change"));
      } else {
        console.log("Google Translate combo not found.");
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const container = document.getElementById("langOptions");
      if (container) {
        languages.forEach(lang => {
          const div = document.createElement("div");
          div.textContent = lang.name;
          div.onclick = () => {
            doGTranslate(lang.code);
            document.querySelector(".lang-selected").textContent = lang.name;
            container.style.display = "none";
          };
          container.appendChild(div);
        });
      }
    });
  }
</script>

<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      autoDisplay: false
    }, 'google_translate_element');
  }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
