{% comment %} <script>
  // Ensure lcw is globally available
  window.lcw = function() {
    return {
      styleProps: {
        generalStyles: {
          width: "360px",
          height: "560px",
          bottom: "50%",
          right: "20px",
          top: "unset",
          left: "unset"
        }
      },
      chatButtonProps: {
        controlProps: {
          hideChatTextContainer: true
        },
        styleProps: {
          generalStyleProps: {
            minWidth: "60px",
            width: "60px",
            height: "60px"
          },
          iconStyleProps: {
            backgroundColor: "#334fb4"
          }
        }
      },
      headerProps: {
        styleProps: {
          generalStyleProps: {
            backgroundColor: "#334fb4"
          },
          iconStyleProps: {
            width: "50px",
            height: "50px",
            color: "white"
          },
          titleStyleProps: {
            color: "white",
            fontWeight: 600
          },
          closeButtonStyleProps: {
            margin: "10px 5px 5px 5px",
            color: "white"
          },
          closeButtonHoverStyleProps: {
            backgroundColor: "rgba(200, 200, 200, 0.2)",
            margin: "10px 5px 5px 5px",
            color: "white"
          },
          minimizeButtonStyleProps: {
            margin: "10px 5px 5px 5px",
            color: "white"
          },
          minimizeButtonHoverStyleProps: {
            backgroundColor: "rgba(200, 200, 200, 0.2)",
            margin: "10px 5px 5px 5px",
            color: "white"
          }
        }
      },
      preChatSurveyPaneProps: {
        styleProps: {
          customButtonStyleProps: {
            backgroundColor: "#334fb4"
          }
        }
      }
    };
  };
</script>

<script>
  window.addEventListener('load', () => {
    setTimeout(() => {
      const lcwScript = document.createElement('script');
      lcwScript.id = "Microsoft_Omnichannel_LCWidget";
      lcwScript.src = "https://oc-cdn-ocprod.azureedge.net/livechatwidget/scripts/LiveChatBootstrapper.js";

      // These MUST be set as attributes for the widget to work
      lcwScript.setAttribute("v2", "true");
      lcwScript.setAttribute("data-app-id", "65e7e3fd-a294-4360-ba33-7398672f2ca9");
      lcwScript.setAttribute("data-lcw-version", "prod");
      lcwScript.setAttribute("data-org-id", "f2015019-2dea-4f2f-9c31-487a8cc6d38f");
      lcwScript.setAttribute("data-org-url", "https://m-f2015019-2dea-4f2f-9c31-487a8cc6d38f.us.omnichannelengagementhub.com");
      lcwScript.setAttribute("data-customization-callback", "lcw");

      document.body.appendChild(lcwScript);
    }, 5000); // Delay 3s after load
  });
</script>
<script>
  const chatWidget = document.querySelector('#Microsoft_Omnichannel_LCWidget_Chat_Iframe_Window');
  const width = screen.width;
  if (chatWidget &&  width > 470) {
      chatWidget.style.transform = 'translateY(calc(50% + 100px))';
    }
</script> {% endcomment %}


<script>
  // Ensure lcw is globally available
  window.lcw = function() {
    return {
      styleProps: {
        generalStyles: {
          width: "360px",
          height: "560px",
          bottom: "10px", 
          right: "20px",
          top: "unset",
          left: "unset"
        }
      },
      chatButtonProps: {
        controlProps: {
          hideChatTextContainer: true
        },
        styleProps: {
          generalStyleProps: {
            minWidth: "60px",
            width: "60px",
            height: "60px"
          },
          iconStyleProps: {
            backgroundColor: "#334fb4"
          }
        }
      },
      headerProps: {
        styleProps: {
          generalStyleProps: {
            backgroundColor: "#334fb4"
          },
          iconStyleProps: {
            width: "50px",
            height: "50px",
            color: "white"
          },
          titleStyleProps: {
            color: "white",
            fontWeight: 600
          },
          closeButtonStyleProps: {
            margin: "10px 5px 5px 5px",
            color: "white"
          },
          closeButtonHoverStyleProps: {
            backgroundColor: "rgba(200, 200, 200, 0.2)",
            margin: "10px 5px 5px 5px",
            color: "white"
          },
          minimizeButtonStyleProps: {
            margin: "10px 5px 5px 5px",
            color: "white"
          },
          minimizeButtonHoverStyleProps: {
            backgroundColor: "rgba(200, 200, 200, 0.2)",
            margin: "10px 5px 5px 5px",
            color: "white"
          }
        }
      },
      preChatSurveyPaneProps: {
        styleProps: {
          customButtonStyleProps: {
            backgroundColor: "#334fb4"
          }
        }
      }
    };
  };
</script>

<script>
  window.addEventListener('load', () => {
    setTimeout(() => {
      const lcwScript = document.createElement('script');
      lcwScript.id = "Microsoft_Omnichannel_LCWidget";
      lcwScript.src = "https://oc-cdn-ocprod.azureedge.net/livechatwidget/scripts/LiveChatBootstrapper.js";

      // These MUST be set as attributes for the widget to work
      lcwScript.setAttribute("v2", "true");
      lcwScript.setAttribute("data-app-id", "65e7e3fd-a294-4360-ba33-7398672f2ca9");
      lcwScript.setAttribute("data-lcw-version", "prod");
      lcwScript.setAttribute("data-org-id", "f2015019-2dea-4f2f-9c31-487a8cc6d38f");
      lcwScript.setAttribute("data-org-url", "https://m-f2015019-2dea-4f2f-9c31-487a8cc6d38f.us.omnichannelengagementhub.com");
      lcwScript.setAttribute("data-customization-callback", "lcw");

      document.body.appendChild(lcwScript);
    }, 5000); // Delay 5s after load
  });
</script>

<script>
  function adjustChatWidget() {
    const chatWidget = document.querySelector('#Microsoft_Omnichannel_LCWidget_Chat_Iframe_Window');
    const recaptcha = document.querySelector('.rc-anchor'); // reCAPTCHA element

    if (chatWidget && recaptcha) {
      const recaptchaRect = recaptcha.getBoundingClientRect();
      const widgetHeight = chatWidget.offsetHeight;

      // Distance from bottom jahan se recaptcha start hota hai
      const recaptchaFromBottom = window.innerHeight - recaptchaRect.top;

      // Default bottom
      let newBottom = 10;

      // Agar overlap hone wala hai to adjust karo
      if (widgetHeight + 20 > recaptchaFromBottom) {
        newBottom = recaptchaFromBottom + 10;
      }

      chatWidget.style.position = "fixed";
      chatWidget.style.right = "20px";
      chatWidget.style.bottom = newBottom + "px";
    }
  }

  window.addEventListener('load', () => {
    setInterval(adjustChatWidget, 500); // har 0.5s me adjust kare
  });

  window.addEventListener('resize', adjustChatWidget);
</script>
