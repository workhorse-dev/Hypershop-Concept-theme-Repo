{%- comment -%}
  Renders product bundle variant-picker

  Accepts:
  - product: {Object} product object.
  - show_variant_labels: {Boolean} Show the variant label.
  - picker_type: {String} Variant picker type.
  - enable_color_swatches: {Boolean} Enable the color swatches.
  - color_swatch_type: {String} Color swatch type.
  - product_id: {String} The ID of the current product.
  - section_id: {String} The ID of section to which this snippet belongs.

  Usage:
  {% render 'product-bundle-variant-picker', product: product, block: block %}
{%- endcomment -%}

{%- liquid
  assign product_form_id = 'ProductForm-' | append: section_id | append: '-' | append: product_id
  assign featured_image = ''
  if product.featured_image
    assign featured_image = product.featured_image | image_url
  endif
-%}
{%- form 'product',
  product,
  id: product_form_id,
  data-type: 'add-to-cart-form',
  data-product-title: product.title,
  data-product-image: featured_image,
  class: 'product-form flex flex-col gap-2 lg:gap-4 h-full justify-between',
  is: 'product-bundle-form',
  aria-controls: controls
-%}
  <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" disabled />



  <noscript>
    <div class="product-form__input{% if product.has_only_default_variant %} hidden{% endif %}">
      <label class="form__label flex gap-2" for="Variants-{{ section_id }}-{{ product_id }}">{{ 'products.product.product_variants' | t }}</label>
      <div class="field">
        <select name="id" id="Variants-{{ section_id }}-{{ product_id }}" class="select">
          {%- for variant in product.variants -%}
            <option
              {% if variant == product.selected_or_first_available_variant %}selected{% endif %}
              {% if variant.available == false %}disabled{% endif %}
              value="{{ variant.id }}"
            >
              {{ variant.title }}
              {%- if variant.available == false %} - {{ 'products.product.sold_out' | t }}{% endif %}
              - {{ variant.price | money | strip_html }}
            </option>
          {%- endfor -%}
        </select>
        {%- render 'icon', icon: 'chevron-up', size: 'sm', class: 'absolute' -%}
      </div>
    </div>
  </noscript>
  
  <div class="mt-auto grid gap-2">

   <div id="Price-{{ section_id }}-{{ product_id }}">
      {%- render 'product-price', product: product, use_variant: true, class: 'flex flex-wrap lg:items-end gap-2 md:gap-1d5', skip_to_price: true -%}
   </div>

  <button
    type="submit"
    name="add"
    class="product-form__submit button button--primary w-full"
    is="hover-button"
    {%- if product.selected_or_first_available_variant.available == false or quantity_rule_soldout %} disabled{% endif -%}
  >
    <span class="btn-fill" data-fill></span>
    <span class="btn-text">
      {%- liquid
        if product.selected_or_first_available_variant.available == false or quantity_rule_soldout
          echo 'products.product.sold_out' | t
        else
          echo 'products.product.add_to_bundle' | t
        endif
      -%}
    </span>
  </button>
  </div>
{%- endform -%}
